<script src='https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/dash-shaka-playback@latest/dist/dash-shaka-playback.min.js'></script><style>body{margin:0 !important}</style>


   <div style="aspect-ratio: 16/9">
      <div id="player" style="width: 100%; height: 100%;"></div>
   </div>


<script>
    var player = new Clappr.Player({
        source: "https://live-ssar-02.tonton.com.my/stream-tv3/master.m3u8?bpkio_serviceid=6c0958d82a830a02ca0936d9cfab8311&did=fffdaa37-069e-06e5-f76b-675c0fd1a1da&dnt=0&ifatype=sessionid&plt=web&lot_auds=ca_306,ca_634,ca_303,ca_160,ca_355,ca_394,ca_339,ca_343,ca_717,ca_426,ca_036,ca_350,ca_121,ca_970,ca_672,ca_968,ca_124,ca_820,ca_243,ca_724,ca_764,ca_831,ca_201,ca_365,ca_018,ca_245,ca_302,ca_045,ca_363,ca_215,ca_268,ca_346,ca_196,ca_789,ca_062,ca_069,ca_384,ca_958,ca_006,ca_013,ca_256,ca_807,ca_1006,ca_1096,ca_307,ca_994,ca_330,ca_934,ca_1000,ca_249,ca_204,ca_061,ca_168,ca_276,ca_134,ca_964,ca_270,ca_967,ca_790,ca_312,ca_331,ca_047,ca_042,ca_311,ca_361,ca_304,ca_381,ca_972,ca_977,ca_012,ca_231,ca_023,ca_070,ca_051,ca_771,ca_316,ca_275,,ca_050,ca_1101,ca_274,ca_233,ca_285,ca_044,ca_321,ca_161,ca_156,ca_1022,ca_325,ca_046,ca_313,ca_348,ca_1011,ca_152,ca_305,ca_300,ca_033,ca_314,ca_949,ca_356,ca_027,ca_125,ca_797,ca_736,ca_991,ca_015,ca_420,ca_060,ca_028,ca_1008,ca_342,ca_341,ca_423,ca_252,ca_267,ca_068,ca_362,ca_273,ca_224,ca_419,ca_324,ca_206,ca_181,ca_043,ca_360,ca_133,ca_1023,ca_139,ca_775,ca_364,ca_242,ca_416,ca_898,ca_014,ca_318,all,ca_791,ca_334,ca_296,ca_172,ca_354,ca_982,ca_159,ca_264,ca_351,ca_282,ca_780,ca_980,ca_1056,ca_948,ca_038,ca_786,ca_752,ca_353,ca_938,ca_171,ca_1007,ca_032,ca_317,ca_329,ca_337,ca_335,ca_250,ca_441,ca_319,ca_987,ca_1026,ca_378,ca_721,ca_281,ca_357,ca_390,ca_187,ca_266,ca_140,ca_315,ca_067,ca_937,ca_326,ca_020,ca_301,ca_239,ca_261,ca_041,ca_216,ca_922,ca_048,ca_686,ca_1015,ca_328,ca_787,ca_372,ca_1035,ca_939,ca_336,ca_162,ca_1034,ca_049,ca_286,ca_323,ca_959,ca_320,ca_1020,ca_248,ca_053,ca_347,ca_287,ca_289,ca_1040,ca_265,ca_295,ca_054,ca_280,ca_141,ca_788,ca_163,ca_271,ca_344,ca_052,ca_236,ca_425,ca_058,ca_200,ca_294,ca_288,ca_358,ca_022,ca_340,ca_756,ca_299,ca_310,ca_730,ca_376,ca_283,ca_272,ca_803,ca_158,ca_073,ca_773,ca_782,ca_040,ca_359,ca_211,ca_897,ca_246,ca_345,ca_074,ca_1003,ca_165,ca_232,ca_009,ca_767,ca_322,ca_292,ca_293,ca_308,ca_198,ca_309,ca_269,ca_291,ca_031,ca_298,ca_209,ca_277,ca_188,ca_349,ca_998,ca_066,ca_075,ca_777,ca_226,ca_260,ca_263,ca_253,ca_080,ca_122,ca_019,ca_338,ca_766,ca_072,ca_021&ttd_uid2=A4AAABJGC1SrPMSyfeLUJneou2Xz6qafpWd0fNW7GgUrW3MWgwEsCnqK8EnSi9G5TqeJLwTAH6ylJaV7uBKblhXSRUfdtTj2Z0bUxGl1DOfOBmoBDvtglI9vS3WcNpCAyZEPB8a_K4TDwzL9D-TkfXsj8YvRxv2JofVaR3OLkfxoaVPZlRWEggVU-fGlZCKiOBplkraTo5NEpogLU5k6WSyLcw&exp=1748994833&hmac=0x9c665d4b4bea06e5f00681923a65bf61a20dd43ead518f17a2a0084d101ed8d4", // Sumber default
        plugins: { playback: [DashShakaPlayback] },
        parentId: "#player",
        width: "100%",
        height: "100%",
        autoPlay: true,
        poster: "",
        shakaConfiguration: {
            drm: {
                clearKeys: {
                    // Tambahkan kunci ClearKey Anda di sini
                 '22489b3a6322ce3a811f313c47f3d842': '3579e944fc146d9d3702f419c53fb55d',
                 '7de0fa3c35f52f8a8517f1600dd11ed7': '2d59cf94d10020aeee01a97cd0716eea',
                 'e60ece8f0d9042fcb52508055ec48e5e': '213f438bd4961cda987d41b7f154f1e5',
                 'e6ed3fdf6e9f491d9ead109fc0b00cfc': '3bc6c45722eb5fa7b343de9bffc4f7c7'
                }
            }
        }
    });

  var fallbackSource = "https://linearjitp-playback.astro.com.my/dash-wv/linear/809/default_primary.mpd"; // Sumber fallback
   // var fallbackSource = "https://cdn-cf-east.streamable.com/video/mp4/n9h1w1.mp4?Expires=1725509180205&Key-Pair-Id=APKAIEYUVEN4EVB2OKEQ&Signature=LVJCDQanhYiY6tDkbKFDVKWUcXDSKFSsq0Bt15apW0Nlu5o7Exb5lkPcGLCfR1tArrTUUWA9wY43rAXyzoMtTi1IgjaIdOPPXsEqZF7vQh2r75AyKL5Q5XdyN84Shp4AdWFps0~3p0QR1DJaWY2aaAC8SMCnMXJJq10mtVMYoLCElZw3pdpkHXmaCs4~MUa2fmXjrYMzOt35lUZSnFke~0wsH-5luFHlVsejWEmWSxIN8xgL8PHAgnoWDy1I1QcKsHA5LAahmQ-zX4wCKfhTgVlH~EZBxtyYDuaNdqmTWwSYNRyjIwNw6dXuWe4So7KKVCck2RjB3E-IjNu0CwNEvg__"; // Sumber fallback

    player.on(Clappr.Events.PLAYER_ERROR, function() {
        // Jika terjadi kesalahan, muat sumber fallback
        player.load(fallbackSource);
    });

    document.querySelectorAll('.channel').forEach(function(channel) {
        channel.addEventListener('click', function() {
            var source = this.getAttribute('data-value');
            var fallback = this.getAttribute('data-fallback');
            player.load(source);

            player.once(Clappr.Events.PLAYER_ERROR, function() {
                // Jika terjadi kesalahan, muat sumber fallback
                player.load(fallback);
            });
        });
    });

    function onFullScreenChange() {
        if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement) {
            // Memasuki mode layar penuh
            if (screen.orientation && screen.orientation.lock) {
                screen.orientation.lock('landscape');
            }
        } else {
            // Keluar dari mode layar penuh
            if (screen.orientation && screen.orientation.unlock) {
                screen.orientation.unlock();
            }
        }
    }

    document.addEventListener('fullscreenchange', onFullScreenChange);
    document.addEventListener('webkitfullscreenchange', onFullScreenChange);
    document.addEventListener('mozfullscreenchange', onFullScreenChange);
    document.addEventListener('MSFullscreenChange', onFullScreenChange);
</script>
